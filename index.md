# Introduction

Стянуть образ из репозитория:

```shell
docker pull [OPTIONS] NAME[:TAG|@DIGEST]
```

```shell
docker run -rm parseq/hello-docker <message>
```

- `-rm` -- удалит контейнер после запуска и отработки
- `parseq/hello-docker` -- образ контейнера в docker hub
- `<message>` -- сообщение (аргумент), которое отправляется в контейнер

## Образы и контейнеры

```sequence
Docker image -> Docker container: run
Docker container --> Docker image: commit
```

**Docker образ (image)** -- чертеж по которому будет построен контейнер

**Docker контейнер** -- экземпляр образа

`run` -- команда для превращения контейнера из образа

[Docker run documentation]:https://docs.docker.com/engine/reference/run/

[Docker run documentation](https://docs.docker.com/engine/reference/run/)

## Команды

| #             | image                                       | container                                                    |
| ------------- | ------------------------------------------- | ------------------------------------------------------------ |
| Название      | Образ                                       | Контейнер                                                    |
| Полный список | `docker images`                             | `docker ps` -- полный список активных (запущенных) контейнеров<br/> `docker ps -a` -- полный список активных (запущенных) контейнеров |
| Собрать       | `docker run` -- собрать контейнер из образа | `docker commit` -- собрать образ из контейнера               |
| Удалить       | `docker rmi`                                | `docker rm`                                                  |



## Режимы запуска контейнеров

1. Контейнер запускается вместе с программой, после чего его можно удалить

   ```shell
   docker run --rm <image-name or image-id>
   ```

   `--rm` -- удалить после завершения работы контейнера

2. Deamon -- программы, которые работают как сервисы (БД, Веб-сервера ...)

   ```shell
   docker run --rm --name <task-name> -it <image-name or image-id>
   ```

   `--rm` -- удалить после завершения работы контейнера

   `--name` -- ключ, задает имя создаваемому контейнеру

   `-it` -- запустить в интерактивном режиме

   ```shell
   docker run --rm --name autodrive-task -it ubuntu:14.04
   ```

3. Интерактивный режим -- Запускаем программу в контейнере, подключаемся к ней и получаем возможность подключить к ней терминал и напрямую взаимодействовать с этой программой (оболочка программной строки)

   ```shell
   docker run --rm -it <image-name or image-id>
   ```

   `--rm` -- удалить после завершения работы контейнера

   `-it` - interactive terminal

   ```shell
   docker run --rm -it ubuntu:18.04
   **Используется:**
   ```

   1. В качесте инструмента изоляции
   2. Что бы не устанавливать зависимости
   3. Отработка действий по созданию images (образов) 

## Образ и контейнер с точки зрения файловой системы

**Layered File System**

Образ у файловой системы представляется совокупностью отдельных слоев и результ является продуктом агригации этих словев

```shell
docker pull ubuntu:15.04
```

![Снимок экрана 2019-11-13 в 15.22.38](/Users/konstantinnabatcikov/Desktop/Снимок экрана 2019-11-13 в 15.22.38.png)

**Посмотреть слои образа:**

```shell
docker history NAME
```

**Слои образа** -- совокупность слоев предназначенных только для чтения

**Слой контецнера** -- предназначен как для чтения, так и для записи

![img-2](/Users/konstantinnabatcikov/Documents/education/docker/doc/img-2.jpg)

При изменении какого-то файла, создается копия, над которой осуществляется манипуляция, оригинал при этом сохраняется на слоях образа

**Подробнее:**

- [Раз](https://medium.com/@jessgreb01/digging-into-docker-layers-c22f948ed612)
- [Два](
